/*
 * Copyright (C) 2009-2014 SAP SE or an SAP affiliate company. All rights reserved
 */
jQuery.sap.declare("zzem.fo.visibility.Component");jQuery.sap.require("sap.m.routing.RouteMatchedHandler");jQuery.sap.require("zzem.fo.visibility.util.formatter");sap.ui.core.UIComponent.extend("zzem.fo.visibility.Component",{_oResourceBundle:null,metadata:{"name":"Event Management Transactional APP","version":"1.0","includes":[],"dependencies":{"libs":["sap.m","sap.me","sap.ushell"],"components":[]},"config":{"resourceBundle":"i18n/i18n.properties","titleResource":"SHELL_TITLE",serviceConfig:{name:"EM_SRV",serviceUrl:"/sap/opu/odata/saptrx/EM_SRV/"}},routing:{config:{viewType:"XML",viewPath:"zzem.fo.visibility.view",targetAggregation:"detailPages",clearTarget:false},routes:[{pattern:"",name:"master",view:"Master",targetAggregation:"masterPages",preservePageInSplitContainer:true,targetControl:"fioriContent",subroutes:[{pattern:"/",view:"NoData",name:"NoData"},{pattern:"Detail/{contextPath}",view:"Detail",name:"Detail"},{pattern:"EVMExpectedDetail/{contextPath}",view:"EVMExpectedDetail",name:"EVMExpectedDetail"},{pattern:"EVMUnexpectedDetail/{contextPath}",view:"EVMUnexpectedDetail",name:"EVMUnexpectedDetail"}]}]}},getResourceBundle:function(){return this._oResourceBundle},init:function(){sap.ui.core.UIComponent.prototype.init.apply(this,arguments);var h=sap.ui.core.routing.HashChanger.getInstance();h.replaceHash("");this._oRouteMatchedHandler=new sap.m.routing.RouteMatchedHandler(this.getRouter());this.getRouter().initialize();var M=this.getMetadata().getConfig();var s=M.serviceConfig;var S=s.serviceUrl;var r=jQuery.sap.getModulePath("zzem.fo.visibility");var p=jQuery.sap.getUriParameters().get("proxyOn");var u=(p==="true");if(u){S=r+"/proxy"+S}var a=jQuery.sap.getUriParameters().get("responderOn");var U=(a==="true");if(U){jQuery.sap.require("sap.ui.core.util.MockServer");var o=new sap.ui.core.util.MockServer({rootUri:S.replace(/\/?$/,"/")});o.simulate(r+"/model/metadata.xml",r+"/model/");o.start();var b="Running in demo mode with mock data.";jQuery.sap.require("sap.m.MessageToast");sap.m.MessageToast.show(b,{duration:4000})}var i=new sap.ui.model.resource.ResourceModel({bundleUrl:r+"/i18n/i18n.properties"});this.setModel(i,"i18n");this._oResourceBundle=jQuery.sap.resources({url:r+"/i18n/i18n.properties",locale:sap.ui.getCore().getConfiguration().getLanguage()});sap.zzem.fo.visibility.util.formatter.init(this._oResourceBundle);var m=new sap.ui.model.odata.ODataModel(S,{json:true,loadMetadataAsync:true,useBatch:true});m.setDefaultCountMode(sap.ui.model.odata.CountMode.Inline);m.attachRequestFailed(function(e){jQuery.sap.require("sap.ca.ui.message.message");sap.ca.ui.message.showMessageBox({type:sap.ca.ui.message.Type.ERROR,message:jQuery.sap.parseJS(e.getParameter("responseText")).error.message.value})});m.attachMetadataFailed(function(e){jQuery.sap.require("sap.ca.ui.message.message");sap.ca.ui.message.showMessageBox({type:sap.ca.ui.message.Type.ERROR,message:jQuery.sap.parseXML(e.getParameter("responseText")).getElementsByTagName("message")[0].childNodes[0].nodeValue})});this.setModel(m);var d=new sap.ui.model.json.JSONModel({isTouch:sap.ui.Device.support.touch,isNoTouch:!sap.ui.Device.support.touch,isPhone:sap.ui.Device.system.phone,isNoPhone:!sap.ui.Device.system.phone,listMode:(sap.ui.Device.system.phone)?"None":"SingleSelectMaster",listItemType:(sap.ui.Device.system.phone)?"Active":"Inactive"});d.setDefaultBindingMode("OneWay");this.setModel(d,"device")},createContent:function(){var v={component:this};return sap.ui.view({viewName:"zzem.fo.visibility.view.App",type:sap.ui.core.mvc.ViewType.XML,viewData:v})}});